<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contributor Profile - We The People of Patna</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../assets/css/style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <!-- Configuration and Utilities -->
  <script src="../assets/js/config.js"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#195A9C',
            secondary: '#144A7F',
            accent: '#E6F2FF',
            light: '#F8FAFC',
          },
        },
      },
    };
  </script>
</head>

<body class="text-gray-100 overflow-x-hidden font-inter">
  <!-- Navbar -->
  <nav class="fixed w-full z-50 bg-white border-b border-light">
    <div class="max-w-6xl mx-auto px-6 py-4 flex justify-between items-center">
      <div class="flex items-center space-x-3">
        <img src="../assets/images/Logo.png" alt="We The People of Patna"
          class="w-12 h-12 rounded-full object-cover border-2 border-primary" />
        <div class="text-2xl font-bold hidden md:block">
          <span class="text-primary">We The People</span>
          <span class="text-primary">of Patna</span>
        </div>
      </div>
      <div class="hidden md:flex space-x-8">
        <a href="../index.html"
          class="text-gray-600 underline-offset-4 decoration-primary hover:text-primary hover:underline hover:decoration-primary transition-colors duration-200">Home</a>
        <a href="../index.html#about"
          class="text-gray-600 underline-offset-4 decoration-primary hover:text-primary hover:underline hover:decoration-primary transition-colors duration-200">About</a>
        <a href="../index.html#vision"
          class="text-gray-600 underline-offset-4 decoration-primary hover:text-primary hover:underline hover:decoration-primary transition-colors duration-200">Our
          Vision</a>
        <a href="../index.html#initiatives"
          class="text-gray-600 underline-offset-4 decoration-primary hover:text-primary hover:underline hover:decoration-primary transition-colors duration-200">Initiatives</a>
        <a href="blog.html"
          class="text-gray-600 underline-offset-4 decoration-primary hover:text-primary hover:underline hover:decoration-primary transition-colors duration-200">Blogs</a>
        <a href="social-stories.html"
          class="text-gray-600 underline-offset-4 decoration-primary hover:text-primary hover:underline hover:decoration-primary transition-colors duration-200">Stories</a>
        <a href="contributors.html"
          class="text-gray-600 underline-offset-4 decoration-primary hover:text-primary hover:underline hover:decoration-primary transition-colors duration-200">Contributors</a>
        <a href="donation.html"
          class="text-gray-600 underline-offset-4 decoration-primary hover:text-primary hover:underline hover:decoration-primary transition-colors duration-200">Donation</a>
        <a href="../index.html#contact"
          class="text-gray-600 underline-offset-4 decoration-primary hover:text-primary hover:underline hover:decoration-primary transition-colors duration-200">Join
          Us</a>
      </div>
      <button id="menu-btn" class="md:hidden block focus:outline-none text-primary">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16" />
        </svg>
      </button>
    </div>
    <div id="mobile-menu" class="md:hidden bg-white px-6 py-4 shadow transition-all duration-300 hidden">
      <a href="../index.html"
        class="block text-gray-600 underline-offset-4 decoration-primary hover:text-primary hover:underline hover:decoration-primary transition-colors py-2">Home</a>
      <a href="../index.html#about"
        class="block text-gray-600 underline-offset-4 decoration-primary hover:text-primary hover:underline hover:decoration-primary transition-colors py-2">About</a>
      <a href="../index.html#vision"
        class="block text-gray-600 underline-offset-4 decoration-primary hover:text-primary hover:underline hover:decoration-primary transition-colors py-2">Our
        Vision</a>
      <a href="../index.html#initiatives"
        class="block text-gray-600 underline-offset-4 decoration-primary hover:text-primary hover:underline hover:decoration-primary transition-colors py-2">Initiatives</a>
      <a href="blog.html"
        class="block text-gray-600 underline-offset-4 decoration-primary hover:text-primary hover:underline hover:decoration-primary transition-colors py-2">Blogs</a>
      <a href="social-stories.html"
        class="block text-gray-600 underline-offset-4 decoration-primary hover:text-primary hover:underline hover:decoration-primary transition-colors py-2">Stories</a>
      <a href="contributors.html"
        class="block text-gray-600 underline-offset-4 decoration-primary hover:text-primary hover:underline hover:decoration-primary transition-colors py-2">Contributors</a>
      <a href="donation.html"
        class="block text-gray-600 underline-offset-4 decoration-primary hover:text-primary hover:underline hover:decoration-primary transition-colors py-2">Donation</a>
      <a href="../index.html#contact"
        class="block text-gray-600 underline-offset-4 decoration-primary hover:text-primary hover:underline hover:decoration-primary transition-colors py-2">Join
        Us</a>
    </div>
  </nav>

  <!-- Breadcrumb -->
  <section class="pt-24 pb-8 bg-light">
    <div class="max-w-6xl mx-auto px-6">
      <nav class="flex text-sm text-gray-600" aria-label="Breadcrumb">
        <a href="../index.html" class="hover:text-primary transition-colors">Home</a>
        <span class="mx-2">/</span>
        <a href="contributors.html" class="hover:text-primary transition-colors">Contributors</a>
        <span class="mx-2">/</span>
        <span id="breadcrumbName" class="text-primary font-medium">Loading...</span>
      </nav>
    </div>
  </section>

  <!-- Profile Header -->
  <section class="pb-16 bg-light relative overflow-hidden">
    <div class="absolute top-0 right-0 w-72 h-72 bg-gradient-to-br from-primary/20 to-accent/10 rounded-full blur-3xl opacity-70"></div>

    <!-- Profile Loading Placeholder -->
    <div id="profilePlaceholder" class="animate-pulse max-w-6xl mx-auto px-6">
      <div class="grid lg:grid-cols-3 gap-12">
        <!-- Profile Image Placeholder -->
        <div class="lg:col-span-1">
          <div class="aspect-square bg-gray-300 rounded-3xl mb-6"></div>
          <div class="space-y-3">
            <div class="h-6 bg-gray-300 rounded w-3/4"></div>
            <div class="h-4 bg-gray-300 rounded w-1/2"></div>
            <div class="h-4 bg-gray-300 rounded w-2/3"></div>
          </div>
        </div>
        
        <!-- Profile Info Placeholder -->
        <div class="lg:col-span-2 space-y-6">
          <div class="space-y-3">
            <div class="h-6 bg-gray-300 rounded w-32"></div>
            <div class="h-10 bg-gray-300 rounded w-3/4"></div>
            <div class="h-4 bg-gray-300 rounded w-1/2"></div>
          </div>
          <div class="space-y-2">
            <div class="h-4 bg-gray-300 rounded"></div>
            <div class="h-4 bg-gray-300 rounded w-5/6"></div>
            <div class="h-4 bg-gray-300 rounded w-4/6"></div>
          </div>
          <div class="flex gap-4">
            <div class="h-12 bg-gray-300 rounded w-32"></div>
            <div class="h-12 bg-gray-300 rounded w-32"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Profile Content (hidden initially) -->
    <div id="profileContent" class="hidden max-w-6xl mx-auto px-6 relative z-10">
      <div class="grid lg:grid-cols-3 gap-12">
        <!-- Profile Image and Quick Stats -->
        <div class="lg:col-span-1">
          <div class="bg-accent rounded-3xl shadow-lg overflow-hidden border border-light sticky top-32">
            <div class="aspect-square relative overflow-hidden">
              <img id="contributorImage" 
                   src="" 
                   alt="Contributor Photo" 
                   class="w-full h-full object-cover" />
              <div class="absolute inset-0 bg-gradient-to-t from-primary/30 to-transparent"></div>
            </div>
            
            <div class="p-6">
              <!-- Contact Information -->
              <div class="space-y-4 mb-6">
                <h3 class="text-lg font-semibold text-secondary">Contact Info</h3>
                
                <div class="space-y-3 text-sm">
                  <div class="flex items-start">
                    <i class="fa-solid fa-envelope text-primary mr-3 mt-1"></i>
                    <div>
                      <p class="text-gray-600">Email</p>
                      <a id="contributorEmail" href="#" class="text-secondary font-medium hover:text-primary transition-colors"></a>
                    </div>
                  </div>
                  
                  <div class="flex items-start">
                    <i class="fa-solid fa-phone text-primary mr-3 mt-1"></i>
                    <div>
                      <p class="text-gray-600">Phone</p>
                      <a id="contributorPhone" href="#" class="text-secondary font-medium hover:text-primary transition-colors"></a>
                    </div>
                  </div>
                  
                  <div class="flex items-start">
                    <i class="fa-solid fa-map-marker-alt text-primary mr-3 mt-1"></i>
                    <div>
                      <p class="text-gray-600">Address</p>
                      <p id="contributorAddress" class="text-secondary font-medium"></p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Contact Actions -->
              <div class="space-y-3">
                <div class="flex gap-2">
                  <button id="shareProfile" 
                          class="flex-1 px-4 py-2 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors duration-200">
                    <i class="fa-solid fa-share mr-2"></i>
                    Share
                  </button>
                  <button id="contactContributor" 
                          class="flex-1 px-4 py-2 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors duration-200">
                    <i class="fa-solid fa-envelope mr-2"></i>
                    Contact
                  </button>
                </div>
              </div>

              <!-- Social Media Links -->
              <div id="socialMediaSection" class="mt-6 pt-6 border-t border-gray-200">
                <h4 class="text-sm font-semibold text-gray-700 mb-3">Connect</h4>
                <div id="socialMediaLinks" class="flex gap-3">
                  <!-- Social media links will be populated dynamically -->
                </div>
              </div>

              <!-- Joined Date -->
              <div class="mt-6 pt-6 border-t border-gray-200">
                <div class="flex items-center text-sm text-gray-600">
                  <i class="fa-solid fa-calendar mr-2"></i>
                  <span>Joined <span id="contributorJoinedDate"></span></span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Main Profile Information -->
        <div class="lg:col-span-2">
          <div class="space-y-8">
            <!-- Header Info -->
            <div>
              <p id="contributorRole" class="text-primary font-semibold uppercase tracking-wide text-sm mb-2"></p>
              <h1 id="contributorName" class="text-4xl md:text-5xl font-extrabold text-secondary mb-4"></h1>
              <p id="contributorLocation" class="text-gray-600 flex items-center text-lg">
                <i class="fa-solid fa-map-marker-alt mr-2"></i>
                <span></span>
              </p>
            </div>

            <!-- Bio/Description -->
            <div class="bg-accent rounded-2xl p-8 border border-light">
              <h2 class="text-2xl font-bold text-secondary mb-4">About</h2>
              <p id="contributorBio" class="text-gray-700 leading-relaxed text-lg"></p>
            </div>

            <!-- Skills/Interests Tags -->
            <div id="contributorTagsSection" class="hidden">
              <h2 class="text-2xl font-bold text-secondary mb-4">Areas of Interest</h2>
              <div id="contributorTags" class="flex flex-wrap gap-3">
                <!-- Tags will be populated dynamically -->
              </div>
            </div>


          </div>
        </div>
      </div>
    </div>

    <!-- Fallback Profile Content -->
    <div id="profileFallback" class="hidden max-w-6xl mx-auto px-6 text-center py-16">
      <i class="fa-solid fa-user-circle text-6xl text-gray-300 mb-6"></i>
      <h2 class="text-3xl font-bold text-gray-600 mb-4">Contributor Not Found</h2>
      <p class="text-gray-500 mb-8">The contributor profile you're looking for doesn't exist or has been removed.</p>
      <a href="contributors.html" 
         class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-primary to-secondary text-white font-semibold rounded-lg hover:shadow-lg transform hover:-translate-y-1 transition-all duration-300">
        <i class="fa-solid fa-arrow-left mr-2"></i>
        Back to Contributors
      </a>
    </div>
  </section>

  <!-- Contributor Stories/Contributions Section -->
  <section class="py-24 bg-gradient-to-b from-white via-light to-white relative overflow-hidden">
    <div class="absolute top-0 left-0 w-64 h-64 bg-primary/10 rounded-full blur-3xl"></div>
    <div class="absolute bottom-0 right-0 w-96 h-96 bg-secondary/10 rounded-full blur-3xl"></div>

    <div class="max-w-6xl mx-auto px-6 relative z-10">
      <div class="text-center mb-16">
        <p class="text-primary font-semibold uppercase tracking-wide mb-3">Contributions</p>
        <h2 class="text-4xl md:text-5xl font-extrabold text-secondary mb-4 leading-tight">
          Stories by <span id="contributorNameInStories" class="bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">This Contributor</span>
        </h2>
        <div class="w-24 h-1 bg-gradient-to-r from-primary to-secondary mx-auto rounded-full"></div>
      </div>

      <!-- Loading Spinner for Stories -->
      <div id="storiesLoadingSpinner" class="justify-center items-center py-12 hidden">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
      </div>

      <!-- Stories Grid Container -->
      <div class="contributor-stories-grid grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        
        <!-- Story cards will be dynamically loaded here -->

      </div>

      <!-- No Stories Message -->
      <div id="noStoriesMessage" class="hidden text-center py-16">
        <div class="max-w-md mx-auto">
          <i class="fa-solid fa-book-open text-6xl text-gray-300 mb-6"></i>
          <h3 class="text-2xl font-bold text-gray-600 mb-4">No Stories Yet</h3>
          <p class="text-gray-500 mb-6">This contributor hasn't shared any stories yet, but great things are coming!</p>
          <a href="social-stories.html" 
             class="px-6 py-3 bg-primary text-white rounded-lg font-medium hover:bg-secondary transition-colors duration-200">
            Explore Other Stories
          </a>
        </div>
      </div>

      <!-- Load More Stories Button -->
      <div class="text-center mt-16">
        <button
          class="load-more-stories-btn px-8 py-4 bg-gradient-to-r from-primary to-secondary text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 hidden"
          onclick="loadMoreContributorStories()">
          <i class="fa-solid fa-plus mr-2"></i>
          Load More Stories
        </button>
      </div>
    </div>
  </section>

  <!-- Related Contributors Section -->
  <section class="py-24 bg-light relative overflow-hidden">
    <div class="absolute top-0 right-0 w-72 h-72 bg-gradient-to-br from-primary/20 to-accent/10 rounded-full blur-3xl opacity-70"></div>

    <div class="max-w-6xl mx-auto px-6 relative z-10">
      <div class="text-center mb-16">
        <p class="text-primary font-semibold uppercase tracking-wide mb-3">Community</p>
        <h2 class="text-4xl md:text-5xl font-extrabold text-secondary mb-4 leading-tight">
          Other <span class="bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">Contributors</span>
        </h2>
        <div class="w-24 h-1 bg-gradient-to-r from-primary to-secondary mx-auto rounded-full"></div>
      </div>

      <!-- Related Contributors Grid -->
      <div class="related-contributors-grid grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        
        <!-- Related contributor cards will be loaded here -->

      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gradient-to-b from-light to-white py-16 relative overflow-hidden">
    <div class="max-w-6xl mx-auto px-6 text-center space-y-8">
      <div class="absolute top-0 left-0 w-72 h-72 bg-primary/10 rounded-full blur-3xl"></div>
      <div class="absolute bottom-0 right-0 w-96 h-96 bg-secondary/10 rounded-full blur-3xl"></div>

      <div class="flex justify-center">
        <div class="relative">
          <img src="../assets/images/Logo.png" alt="We The People of Patna"
            class="w-20 h-20 rounded-full object-cover border-4 border-primary shadow-lg" />
        </div>
      </div>

      <div class="flex justify-center space-x-6 mt-6">
        <a href="https://www.facebook.com/profile.php?id=61580770327109" target="_blank"
          class="text-primary hover:text-secondary transition-colors duration-200">
          <i class="fa-brands fa-facebook text-2xl"></i>
        </a>
        <a href="https://www.instagram.com/wethepeopleofpatna" target="_blank"
          class="text-primary hover:text-secondary transition-colors duration-200">
          <i class="fa-brands fa-instagram text-2xl"></i>
        </a>
        <a href="https://wa.me/919229551125" target="_blank"
          class="text-primary hover:text-secondary transition-colors duration-200">
          <i class="fa-brands fa-whatsapp text-2xl"></i>
        </a>
      </div>

      <p class="text-primary/70 text-sm">Â© 2025 We The People of Patna. All Rights Reserved.</p>
    </div>
  </footer>

  <script>
    // Mobile menu toggle
    const menuBtn = document.getElementById('menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    menuBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });

    // Global variables
    let contributorId = null;
    let currentStoriesPage = 1;
    let isLoadingStories = false;
    let contributorData = null;

    // Get contributor ID from URL
    function getContributorId() {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get('id');
    }

    // Load contributor profile data using mock data
    async function loadContributorProfile(id) {
      try {
        // Use comprehensive mock data
        await loadMockProfile(id);
      } catch (error) {
        console.error('Error loading contributor profile:', error);
        showProfileNotFound();
      }
    }

    // Load mock profile data with all necessary fields
    async function loadMockProfile(id) {
      const mockProfiles = {
        '1': {
          id: 1,
          name: 'Vishal Singh',
          role: 'Community Leader & Activist',
          displayRole: 'Community Leader & Activist',
          photo: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=400&fit=crop&crop=face',
          bio: 'Vishal Singh is the driving force behind "We The People of Patna." A visionary leader and reformist thinker, he represents a new era of citizen-led change focused on honesty, accountability, and self-governance. His mission is to unite ordinary people in extraordinary action and rebuild Bihar on the principles of equality, justice, and collective responsibility.',
          email: 'vishal.singh@wethepeopleofpatna.in',
          phone: '+91 92295 51125',
          address: {
            street: '123 Gandhi Maidan Road',
            city: 'Patna',
            state: 'Bihar',
            pincode: '800001',
            full: '123 Gandhi Maidan Road, Patna, Bihar - 800001'
          },
          location: 'Patna, Bihar',
          joinedDate: '2024-01-15',
          tags: ['Leadership', 'Reform', 'Community', 'Vision', 'Governance'],
          socialMedia: {
            facebook: 'https://facebook.com/vishalsingh',
            instagram: 'https://instagram.com/vishalsingh',
            twitter: 'https://twitter.com/vishalsingh',
            linkedin: 'https://linkedin.com/in/vishalsingh'
          },
          achievements: [
            'Founded "We The People of Patna" initiative',
            'Led 25+ community reform projects',
            'Impacted 5000+ lives through various programs',
            'Featured in Bihar Times for social leadership'
          ]
        },
        '2': {
          id: 2,
          name: 'Priya Kumari',
          role: 'youth_leader',
          displayRole: 'Youth Leader & Education Advocate',
          photo: 'https://images.unsplash.com/photo-1494790108755-2616b612b1e1?w=400&h=400&fit=crop&crop=face',
          bio: 'Priya Kumari is a passionate youth leader working to empower young voices in Bihar. She focuses on education reform, women\'s empowerment, and creating opportunities for youth participation in democratic processes. Her innovative approach to community engagement has inspired hundreds of young people.',
          email: 'priya.kumari@wethepeopleofpatna.in',
          phone: '+91 98765 43210',
          address: {
            street: '456 University Road',
            city: 'Muzaffarpur',
            state: 'Bihar',
            pincode: '842001',
            full: '456 University Road, Muzaffarpur, Bihar - 842001'
          },
          location: 'Muzaffarpur, Bihar',
          joinedDate: '2024-02-20',

          tags: ['Youth', 'Education', 'Empowerment', 'Women\'s Rights', 'Leadership'],
          socialMedia: {
            facebook: 'https://facebook.com/priyakumari',
            instagram: 'https://instagram.com/priyakumari',
            twitter: 'https://twitter.com/priyakumari'
          },
        },
        '3': {
          id: 3,
          name: 'Rajesh Kumar',
          role: 'volunteer',
          displayRole: 'Environmental Activist',
          photo: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400&h=400&fit=crop&crop=face',
          bio: 'Rajesh Kumar is a dedicated environmental activist focusing on conservation and sustainable development in rural Bihar. He works closely with farming communities to promote eco-friendly practices and has been instrumental in implementing green initiatives across multiple districts.',
          email: 'rajesh.kumar@wethepeopleofpatna.in',
          phone: '+91 87654 32109',
          address: {
            street: '789 Bodhi Tree Lane',
            city: 'Gaya',
            state: 'Bihar',
            pincode: '823001',
            full: '789 Bodhi Tree Lane, Gaya, Bihar - 823001'
          },
          location: 'Gaya, Bihar',
          joinedDate: '2024-03-10',
          contributionsCount: 15,
          storiesCount: 6,
          impactCount: 1800,
          totalViews: 4500,
          communityReach: 2200,
          tags: ['Environment', 'Sustainability', 'Rural Development', 'Agriculture', 'Conservation'],
          socialMedia: {
            facebook: 'https://facebook.com/rajeshkumar',
            instagram: 'https://instagram.com/rajeshkumar'
          },
          achievements: [
            'Planted 5000+ trees across Bihar',
            'Established 3 organic farming cooperatives',
            'Reduced plastic waste by 40% in 10 villages',
            'Green Warrior Award recipient 2024'
          ]
        },
        '4': {
          id: 4,
          name: 'Anita Sharma',
          role: 'healthcare_advocate',
          displayRole: 'Healthcare Advocate',
          photo: 'https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=400&h=400&fit=crop&crop=face',
          bio: 'Dr. Anita Sharma is a healthcare advocate dedicated to improving medical access in rural Bihar. With over 10 years of experience in public health, she has established mobile medical units and health awareness programs that have benefited thousands of families.',
          email: 'anita.sharma@wethepeopleofpatna.in',
          phone: '+91 76543 21098',
          address: {
            street: '321 Medical College Road',
            city: 'Darbhanga',
            state: 'Bihar',
            pincode: '846001',
            full: '321 Medical College Road, Darbhanga, Bihar - 846001'
          },
          location: 'Darbhanga, Bihar',
          joinedDate: '2024-01-28',
          contributionsCount: 22,
          storiesCount: 10,
          impactCount: 3200,
          totalViews: 9500,
          communityReach: 4800,
          tags: ['Healthcare', 'Rural Development', 'Medical Access', 'Public Health', 'Community Service'],
          socialMedia: {
            facebook: 'https://facebook.com/anitasharma',
            linkedin: 'https://linkedin.com/in/anitasharma'
          },
          achievements: [
            'Established 4 mobile medical units',
            'Conducted 200+ health camps',
            'Trained 50+ community health workers',
            'Healthcare Hero Award 2024'
          ]
        },
        '5': {
          id: 5,
          name: 'Amit Verma',
          role: 'education_reformer',
          displayRole: 'Education Technology Pioneer',
          photo: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=400&h=400&fit=crop&crop=face',
          bio: 'Amit Verma is an education technology pioneer working to bridge the digital divide in Bihar\'s education system. He has developed innovative e-learning solutions and has been instrumental in bringing technology-enabled education to remote villages.',
          email: 'amit.verma@wethepeopleofpatna.in',
          phone: '+91 65432 10987',
          address: {
            street: '654 Tech Park Avenue',
            city: 'Bhagalpur',
            state: 'Bihar',
            pincode: '812001',
            full: '654 Tech Park Avenue, Bhagalpur, Bihar - 812001'
          },
          location: 'Bhagalpur, Bihar',
          joinedDate: '2024-02-05',
          contributionsCount: 20,
          storiesCount: 14,
          impactCount: 4500,
          totalViews: 12000,
          communityReach: 6200,
          tags: ['Education', 'Technology', 'Digital Literacy', 'Innovation', 'E-Learning'],
          socialMedia: {
            facebook: 'https://facebook.com/amitverma',
            twitter: 'https://twitter.com/amitverma',
            linkedin: 'https://linkedin.com/in/amitverma'
          },
          achievements: [
            'Launched Bihar EdTech Initiative',
            'Connected 50+ schools to digital platforms',
            'Trained 200+ teachers in digital tools',
            'Innovation in Education Award 2024'
          ]
        }
      };

      const contributor = mockProfiles[id] || mockProfiles['1'];
      contributorData = contributor;
      displayContributorProfile(contributor);
    }

    // Display contributor profile
    function displayContributorProfile(contributor) {
      const placeholder = document.getElementById('profilePlaceholder');
      const content = document.getElementById('profileContent');
      const fallback = document.getElementById('profileFallback');

      // Hide placeholder and fallback
      placeholder.style.display = 'none';
      fallback.classList.add('hidden');

      // Update breadcrumb
      document.getElementById('breadcrumbName').textContent = contributor.name;

      // Update page title
      document.title = `${contributor.name} - Contributor Profile | We The People of Patna`;

      // Populate basic profile content
      document.getElementById('contributorImage').src = contributor.photo || 'https://cdn-icons-png.flaticon.com/512/149/149071.png';
      document.getElementById('contributorName').textContent = contributor.name;
      document.getElementById('contributorRole').textContent = contributor.displayRole || contributor.role;
      document.getElementById('contributorLocation').querySelector('span').textContent = contributor.location || 'Bihar, India';
      document.getElementById('contributorBio').textContent = contributor.bio || 'Passionate contributor working towards Bihar\'s transformation.';
      document.getElementById('contributorJoinedDate').textContent = formatDate(contributor.joinedDate);

      // Populate contact information
      const emailElement = document.getElementById('contributorEmail');
      emailElement.textContent = contributor.email;
      emailElement.href = `mailto:${contributor.email}`;

      const phoneElement = document.getElementById('contributorPhone');
      phoneElement.textContent = contributor.phone;
      phoneElement.href = `tel:${contributor.phone}`;

      document.getElementById('contributorAddress').textContent = contributor.address?.full || contributor.location || 'Bihar, India';

      // Update contributor name in stories section
      document.getElementById('contributorNameInStories').textContent = contributor.name;

      // Handle tags
      if (contributor.tags && contributor.tags.length > 0) {
        const tagsSection = document.getElementById('contributorTagsSection');
        const tagsContainer = document.getElementById('contributorTags');
        
        tagsContainer.innerHTML = '';
        contributor.tags.forEach(tag => {
          const tagElement = document.createElement('span');
          tagElement.className = 'px-4 py-2 bg-primary/10 text-primary font-medium rounded-full border border-primary/20';
          tagElement.textContent = tag;
          tagsContainer.appendChild(tagElement);
        });
        
        tagsSection.classList.remove('hidden');
      }

      // Handle social media links
      if (contributor.socialMedia) {
        const socialSection = document.getElementById('socialMediaSection');
        const socialContainer = document.getElementById('socialMediaLinks');
        
        socialContainer.innerHTML = '';
        
        const socialPlatforms = {
          facebook: { icon: 'fa-brands fa-facebook', color: 'text-blue-600' },
          twitter: { icon: 'fa-brands fa-twitter', color: 'text-blue-400' },
          instagram: { icon: 'fa-brands fa-instagram', color: 'text-pink-600' },
          linkedin: { icon: 'fa-brands fa-linkedin', color: 'text-blue-700' }
        };

        Object.entries(contributor.socialMedia).forEach(([platform, url]) => {
          if (url && socialPlatforms[platform]) {
            const link = document.createElement('a');
            link.href = url;
            link.target = '_blank';
            link.className = `w-10 h-10 rounded-full bg-white border border-gray-300 flex items-center justify-center hover:shadow-lg transition-all duration-300 ${socialPlatforms[platform].color}`;
            link.innerHTML = `<i class="${socialPlatforms[platform].icon} text-lg"></i>`;
            socialContainer.appendChild(link);
          }
        });
        
        if (socialContainer.children.length > 0) {
          socialSection.classList.remove('hidden');
        }
      }

      // Handle contact actions
      document.getElementById('shareProfile').onclick = () => shareProfile(contributor);
      document.getElementById('contactContributor').onclick = () => contactContributor(contributor);

      // Show content
      content.classList.remove('hidden');

      // Load contributor stories
      loadContributorStories(contributor.id);
      loadRelatedContributors(contributor.id);
    }

    // Show profile not found
    function showProfileNotFound() {
      const placeholder = document.getElementById('profilePlaceholder');
      const content = document.getElementById('profileContent');
      const fallback = document.getElementById('profileFallback');

      placeholder.style.display = 'none';
      content.classList.add('hidden');
      fallback.classList.remove('hidden');
    }

    // Load contributor stories/contributions using mock data
    async function loadContributorStories(contributorId, page = 1, category = '') {
      if (isLoadingStories) return;
      
      isLoadingStories = true;
      const loadingSpinner = document.getElementById('storiesLoadingSpinner');
      const storiesGrid = document.querySelector('.contributor-stories-grid');
      const noStoriesMessage = document.getElementById('noStoriesMessage');
      const loadMoreBtn = document.querySelector('.load-more-stories-btn');

      // Show loading spinner
      loadingSpinner.classList.remove('hidden');
      loadingSpinner.classList.add('flex');

      try {
        // Use mock stories data
        let stories = getMockStories(contributorId, category);
        
        // Simulate pagination
        const startIndex = (page - 1) * 6;
        const endIndex = startIndex + 6;
        const paginatedStories = stories.slice(startIndex, endIndex);

        if (page === 1) {
          storiesGrid.innerHTML = '';
          noStoriesMessage.classList.add('hidden');
        }

        if (paginatedStories.length === 0 && page === 1) {
          noStoriesMessage.classList.remove('hidden');
          loadMoreBtn.classList.add('hidden');
        } else {
          displayContributorStories(paginatedStories);
          
          // Show/hide load more button based on whether there are more stories
          if (endIndex < stories.length) {
            loadMoreBtn.classList.remove('hidden');
          } else {
            loadMoreBtn.classList.add('hidden');
          }
        }

      } catch (error) {
        console.error('Error loading contributor stories:', error);
        noStoriesMessage.classList.remove('hidden');
        loadMoreBtn.classList.add('hidden');
      } finally {
        loadingSpinner.classList.add('hidden');
        loadingSpinner.classList.remove('flex');
        isLoadingStories = false;
      }
    }

    // Get mock stories for contributor
    function getMockStories(contributorId, category = '') {
      const allMockStories = [
        // Vishal Singh's stories (ID: 1)
        {
          id: 1,
          title: 'Transforming Education in Rural Patna',
          category: 'Reform Victory',
          description: 'How we established digital literacy programs in 15 villages, bringing technology and modern education to rural communities across Patna district.',
          image: 'https://images.unsplash.com/photo-1509062522246-3755977927d7?w=600&h=400&fit=crop',
          date: '2024-10-15',
          location: 'Patna, Bihar',
          contributorId: 1,
          readTime: '5 min read'
        },
        {
          id: 2,
          title: 'Youth Leadership Summit 2024',
          category: 'Youth Power',
          description: 'Organizing Bihar\'s largest youth leadership summit with 500+ participants from across the state, creating a platform for young voices.',
          image: 'https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=600&h=400&fit=crop',
          date: '2024-09-20',
          location: 'Patna, Bihar',
          contributorId: 1,
          readTime: '7 min read'
        },
        {
          id: 3,
          title: 'Community Health Drive Success',
          category: 'Community',
          description: 'Establishing mobile health units that have served over 10,000 people in remote areas of Bihar, improving healthcare access.',
          image: 'https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=600&h=400&fit=crop',
          date: '2024-08-30',
          location: 'Various Districts, Bihar',
          contributorId: 1,
          readTime: '6 min read'
        },
        
        // Priya Kumari's stories (ID: 2)
        {
          id: 4,
          title: 'Women Empowerment Workshop Series',
          category: 'Community',
          description: 'Conducting skill development workshops for 300+ women, helping them start their own businesses and become financially independent.',
          image: 'https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=600&h=400&fit=crop',
          date: '2024-07-25',
          location: 'Muzaffarpur, Bihar',
          contributorId: 2,
          readTime: '4 min read'
        },
        {
          id: 5,
          title: 'Digital Literacy for Rural Girls',
          category: 'Youth Power',
          description: 'Bridging the digital divide by teaching technology skills to 500+ rural girls, opening new opportunities for their future.',
          image: 'https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=600&h=400&fit=crop',
          date: '2024-06-15',
          location: 'Muzaffarpur, Bihar',
          contributorId: 2,
          readTime: '5 min read'
        },

        // Rajesh Kumar's stories (ID: 3)
        {
          id: 6,
          title: 'Clean Water Initiative Success',
          category: 'Environment',
          description: 'Installing water purification systems in 20 villages, providing clean drinking water to 5000+ families across rural Bihar.',
          image: 'https://images.unsplash.com/photo-1541840031508-326b77c9a17e?w=600&h=400&fit=crop',
          date: '2024-08-10',
          location: 'Gaya, Bihar',
          contributorId: 3,
          readTime: '6 min read'
        },
        {
          id: 7,
          title: 'Organic Farming Revolution',
          category: 'Environment',
          description: 'Converting 50+ farms to organic practices, improving soil health while increasing farmer incomes by 40%.',
          image: 'https://images.unsplash.com/photo-1500382017468-9049fed747ef?w=600&h=400&fit=crop',
          date: '2024-05-20',
          location: 'Gaya, Bihar',
          contributorId: 3,
          readTime: '7 min read'
        },

        // Anita Sharma's stories (ID: 4)
        {
          id: 8,
          title: 'Mobile Medical Units Transform Healthcare',
          category: 'Community',
          description: 'Bringing advanced medical care to remote villages through innovative mobile units, serving 200+ patients daily.',
          image: 'https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=600&h=400&fit=crop',
          date: '2024-09-05',
          location: 'Darbhanga, Bihar',
          contributorId: 4,
          readTime: '6 min read'
        },
        {
          id: 9,
          title: 'Maternal Health Awareness Campaign',
          category: 'Community',
          description: 'Reducing maternal mortality by 60% in target areas through comprehensive health education and support programs.',
          image: 'https://images.unsplash.com/photo-1559757175-0eb30cd8c063?w=600&h=400&fit=crop',
          date: '2024-07-12',
          location: 'Darbhanga, Bihar',
          contributorId: 4,
          readTime: '5 min read'
        },

        // Amit Verma's stories (ID: 5)
        {
          id: 10,
          title: 'Digital Classrooms Revolution',
          category: 'Reform Victory',
          description: 'Transforming 50+ schools with smart classroom technology, improving learning outcomes for 3000+ students.',
          image: 'https://images.unsplash.com/photo-1509062522246-3755977927d7?w=600&h=400&fit=crop',
          date: '2024-08-22',
          location: 'Bhagalpur, Bihar',
          contributorId: 5,
          readTime: '8 min read'
        },
        {
          id: 11,
          title: 'Teacher Training Initiative',
          category: 'Youth Power',
          description: 'Training 200+ teachers in modern pedagogical methods and technology integration, enhancing education quality.',
          image: 'https://images.unsplash.com/photo-1497486751825-1233686d5d80?w=600&h=400&fit=crop',
          date: '2024-06-28',
          location: 'Bhagalpur, Bihar',
          contributorId: 5,
          readTime: '6 min read'
        }
      ];

      let filteredStories = allMockStories.filter(story => story.contributorId == contributorId);
      
      if (category && category.trim() !== '') {
        filteredStories = filteredStories.filter(story => story.category === category);
      }

      return filteredStories;
    }

    // Display contributor stories
    function displayContributorStories(stories) {
      const storiesGrid = document.querySelector('.contributor-stories-grid');
      
      stories.forEach(story => {
        const storyCard = createStoryCard(story);
        storiesGrid.appendChild(storyCard);
      });
    }

    // Create story card element
    function createStoryCard(story) {
      const card = document.createElement('article');
      card.className = 'story-card bg-accent rounded-2xl shadow-lg overflow-hidden border border-light hover:shadow-xl transform hover:-translate-y-2 transition-all duration-300 cursor-pointer';
      
      card.innerHTML = `
        <div class="relative">
          <img src="${story.image || 'https://images.unsplash.com/photo-1497486751825-1233686d5d80?w=600&h=400&fit=crop'}" 
               alt="${story.title}" 
               class="w-full h-48 object-cover" />
          <div class="absolute inset-0 bg-gradient-to-t from-primary/30 to-transparent"></div>
          <div class="absolute top-4 left-4">
            <span class="px-3 py-1 bg-primary text-white text-xs font-semibold rounded-full">
              ${story.category}
            </span>
          </div>
          ${story.readTime ? `
          <div class="absolute top-4 right-4">
            <span class="px-2 py-1 bg-black/50 text-white text-xs rounded-full">
              ${story.readTime}
            </span>
          </div>
          ` : ''}
        </div>
        
        <div class="p-6">
          <div class="mb-4">
            <h3 class="text-xl font-bold text-secondary mb-2 line-clamp-2">${story.title}</h3>
            <p class="text-gray-700 text-sm leading-relaxed line-clamp-3">
              ${story.description || story.excerpt || 'Click to read this inspiring story of change and impact.'}
            </p>
          </div>
          
          <div class="flex justify-between items-center text-sm text-gray-500 mb-4">
            <span><i class="fa-solid fa-calendar mr-1"></i>${formatDate(story.date)}</span>
            ${story.location ? `<span><i class="fa-solid fa-map-marker-alt mr-1"></i>${story.location}</span>` : ''}
          </div>
          
          <button onclick="viewStoryDetails(${story.id})" 
                  class="w-full px-4 py-2 bg-gradient-to-r from-primary to-secondary text-white font-medium rounded-lg hover:shadow-lg transition-all duration-300">
            Read Story
          </button>
        </div>
      `;
      
      return card;
    }

    // Load related contributors using mock data
    async function loadRelatedContributors(excludeId) {
      try {
        const relatedContributors = getMockRelatedContributors(excludeId);
        displayRelatedContributors(relatedContributors);
      } catch (error) {
        console.error('Error loading related contributors:', error);
      }
    }

    // Get mock related contributors
    function getMockRelatedContributors(excludeId) {
      const allContributors = [
        {
          id: 1,
          name: 'Vishal Singh',
          role: 'Community Leader & Activist',
          photo: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=400&fit=crop&crop=face',
          contributionsCount: 25,
          location: 'Patna, Bihar'
        },
        {
          id: 2,
          name: 'Priya Kumari',
          role: 'Youth Leader & Education Advocate',
          photo: 'https://images.unsplash.com/photo-1494790108755-2616b612b1e1?w=400&h=400&fit=crop&crop=face',
          contributionsCount: 18,
          location: 'Muzaffarpur, Bihar'
        },
        {
          id: 3,
          name: 'Rajesh Kumar',
          role: 'Environmental Activist',
          photo: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400&h=400&fit=crop&crop=face',
          contributionsCount: 15,
          location: 'Gaya, Bihar'
        },
        {
          id: 4,
          name: 'Anita Sharma',
          role: 'Healthcare Advocate',
          photo: 'https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=400&h=400&fit=crop&crop=face',
          contributionsCount: 22,
          location: 'Darbhanga, Bihar'
        },
        {
          id: 5,
          name: 'Amit Verma',
          role: 'Education Technology Pioneer',
          photo: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=400&h=400&fit=crop&crop=face',
          contributionsCount: 20,
          location: 'Bhagalpur, Bihar'
        }
      ];

      return allContributors.filter(c => c.id != excludeId).slice(0, 3);
    }

    // Display related contributors
    function displayRelatedContributors(contributors) {
      const relatedGrid = document.querySelector('.related-contributors-grid');
      relatedGrid.innerHTML = '';
      
      contributors.forEach(contributor => {
        const card = document.createElement('div');
        card.className = 'bg-accent rounded-2xl shadow-lg overflow-hidden border border-light hover:shadow-xl transform hover:-translate-y-2 transition-all duration-300 cursor-pointer';
        
        card.innerHTML = `
          <div class="relative">
            <img src="${contributor.photo || 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=400&fit=crop&crop=face'}" 
                 alt="${contributor.name}" 
                 class="w-full h-48 object-cover" />
            <div class="absolute inset-0 bg-gradient-to-t from-primary/30 to-transparent"></div>
          </div>
          
          <div class="p-6">
            <h3 class="text-xl font-bold text-secondary mb-2">${contributor.name}</h3>
            <p class="text-primary font-semibold text-sm mb-2">${contributor.role}</p>
            <p class="text-gray-500 text-sm mb-4">
              <i class="fa-solid fa-map-marker-alt mr-1"></i>${contributor.location || 'Bihar, India'}
            </p>
            <div class="text-center mb-4">
              <span class="text-primary font-bold">${contributor.contributionsCount || 0}</span>
              <span class="text-gray-500 text-sm ml-1">contributions</span>
            </div>
            <button onclick="viewContributor(${contributor.id})" 
                    class="w-full px-4 py-2 bg-gradient-to-r from-primary to-secondary text-white font-medium rounded-lg hover:shadow-lg transition-all duration-300">
              View Profile
            </button>
          </div>
        `;
        
        relatedGrid.appendChild(card);
      });
    }

    // Utility functions
    function abbreviateNumber(num) {
      if (num >= 1000000) {
        return (num / 1000000).toFixed(1) + 'M';
      } else if (num >= 1000) {
        return (num / 1000).toFixed(1) + 'K';
      }
      return num.toString();
    }

    function formatDate(dateString) {
      const date = new Date(dateString);
      const options = { year: 'numeric', month: 'long', day: 'numeric' };
      return date.toLocaleDateString('en-US', options);
    }

    function shareProfile(contributor) {
      if (navigator.share) {
        navigator.share({
          title: `${contributor.name} - Contributor Profile`,
          text: `Check out ${contributor.name}'s inspiring work with We The People of Patna`,
          url: window.location.href
        });
      } else {
        // Fallback to copy URL
        navigator.clipboard.writeText(window.location.href).then(() => {
          alert('Profile link copied to clipboard!');
        }).catch(() => {
          alert('Unable to copy link. Please copy the URL manually.');
        });
      }
    }

    function contactContributor(contributor) {
      const message = `Hi ${contributor.name}, I came across your profile on We The People of Patna and would love to connect!`;
      const whatsappUrl = `https://wa.me/919229551125?text=${encodeURIComponent(message)}`;
      window.open(whatsappUrl, '_blank');
    }

    function viewStoryDetails(storyId) {
      window.location.href = `story-details.html?id=${storyId}`;
    }

    function viewContributor(contributorId) {
      window.location.href = `contributor-profile.html?id=${contributorId}`;
    }

    function loadMoreContributorStories() {
      currentStoriesPage += 1;
      const activeFilter = document.querySelector('.story-category-filter.active');
      loadContributorStories(contributorId, currentStoriesPage, activeFilter ? activeFilter.dataset.category : '');
    }

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      contributorId = getContributorId();
      
      if (!contributorId) {
        showProfileNotFound();
        return;
      }

      // Load contributor profile
      loadContributorProfile(contributorId);

      // Story category filter functionality
      const categoryFilters = document.querySelectorAll('.story-category-filter');
      categoryFilters.forEach(button => {
        button.addEventListener('click', () => {
          // Update active state
          categoryFilters.forEach(btn => {
            btn.classList.remove('active', 'bg-primary', 'text-white');
            btn.classList.add('bg-white', 'text-gray-600', 'border', 'border-gray-300');
          });
          
          button.classList.add('active', 'bg-primary', 'text-white');
          button.classList.remove('bg-white', 'text-gray-600', 'border', 'border-gray-300');
          
          // Load filtered stories
          currentStoriesPage = 1;
          loadContributorStories(contributorId, 1, button.dataset.category);
        });
      });

      // Fallback timeout for profile loading
      setTimeout(() => {
        const placeholder = document.getElementById('profilePlaceholder');
        const content = document.getElementById('profileContent');
        const fallback = document.getElementById('profileFallback');
        
        if (placeholder && placeholder.style.display !== 'none') {
          placeholder.style.display = 'none';
          if (content.classList.contains('hidden') && fallback.classList.contains('hidden')) {
            showProfileNotFound();
          }
        }
      }, 5000);
    });
  </script>

</body>

</html>
